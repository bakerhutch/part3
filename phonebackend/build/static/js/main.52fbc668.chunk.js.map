{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addName","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","value","onChange","required","pattern","DeleteButton","id","handleDelete","name","onClick","Persons","persons","filter","regexp","RegExp","newArr","x","test","map","number","Filter","handleFilter","baseUrl","axios","get","then","response","console","log","data","personObj","post","delete","newPerson","put","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","useEffect","personService","initialList","e","target","preventDefault","personsObj","every","concat","setTimeout","catch","error","existPerson","window","confirm","findIndex","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.52fbc668.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({addName,handleNameChange,handleNumberChange, newName, newNumber}) => {\r\n  \r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name:{\"\"}\r\n        <input\r\n          type=\"text\"\r\n          value={newName}\r\n          onChange={handleNameChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        number:{\"\"}\r\n        <input\r\n          type=\"tel\"\r\n          value={newNumber}\r\n          onChange={handleNumberChange}\r\n          pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\"\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        'number' entry format: 000-000-0000\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst DeleteButton = ({id , handleDelete}) => {\r\n  return (\r\n    <button name={id} type='button' onClick={()=>handleDelete(id)}>\r\n      delete\r\n    </button>\r\n  )\r\n}\r\n\r\nconst Persons = ({ persons, filter, handleDelete }) => {\r\n  const regexp = new RegExp(filter, \"i\");\r\n  const newArr = persons.filter((x) => regexp.test(x.name));\r\n  if (filter) {\r\n    return (\r\n      <>\r\n        {newArr.map((x) => (\r\n          <div key={x.name}>\r\n            {x.name} {x.number} <DeleteButton id={x.id} handleDelete={handleDelete} />\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        {persons.map((x) => (\r\n          <div key={x.name}>\r\n            {x.name} {x.number} <DeleteButton id={x.id} handleDelete={handleDelete}/>\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n}}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({filter, handleFilter}) => {\r\n    return (\r\n        <p>\r\n            filter search with: <input type='text' value={filter} onChange={handleFilter} />\r\n        </p>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then((response) => {\r\n        console.log(response.data)\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst addEntry = (personObj) => {\r\n    const request = axios.post(baseUrl, personObj)\r\n    //console.log(`Added ${personObj.name} to JSON server`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst delEntry = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    //console.log('DelEntry')\r\n    return request.then(response=>response.data)\r\n}\r\n\r\nconst changeNumber = (personObj, newNumber) => {\r\n    const newPerson = {...personObj, number: newNumber}\r\n    //console.log('changeNumber', newPerson)\r\n    const request = axios.put(`${baseUrl}/${personObj.id}`, newPerson)\r\n    return request.then(response=>response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {getAll, addEntry, delEntry, changeNumber}","import React from \"react\";\r\n\r\nconst Notification = ({message}) => {\r\n    if (message===null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className='error'>\r\n            {message}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\nimport Notification from './components/Notification'\nimport './index.css'\n\n//<div>debug: {newName}</div> - temporarily added to rendered component to help debup passing state and other variables\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\"); //for controlling the form input method\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialList) => {\n      setPersons(initialList);\n    });\n  }, []);\n\n  //console.log(\"render\", persons.length, \"people\");\n\n  const addName = (e) => {\n    e.preventDefault();\n    const personsObj = {\n      name: newName,\n      number: newNumber,\n    };\n    //eslint-disable-next-line\n    if (persons.every((x) => x.name != personsObj.name)) {\n      //2.15 Adding number to db.json. Will use personService in next exercise\n      personService.addEntry(personsObj)\n      .then((response) => {\n        //console.log(response);\n        setPersons(persons.concat(response));\n        setErrorMessage(`${response.name} has been added.`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n      })\n      .catch(error => {\n        setErrorMessage(error.response.data.error)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n      })\n    } else {\n      const existPerson = persons.filter(x=>x.name===personsObj.name)\n      //console.log(existPerson[0])\n      personService\n        .changeNumber(existPerson[0], newNumber)\n        .then(response=>{\n          setPersons(persons.map(x=>x = x.id===response.id ? response : x))\n          setErrorMessage(`${response.name}'s entry has been updated.`)\n          setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n        })\n        .catch(error => {\n          console.log(error.response.data.error)\n          setErrorMessage(error.response.data.error)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleNameChange = (e) => {\n    //console.log(e.target.value)\n    setNewName(e.target.value);\n  };\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilter = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const handleDelete = (id) => {\n    const result = window.confirm(`Delete ${persons[persons.findIndex(x=>x.id===id)].name}?`);\n    if (result) {\n      personService\n        .delEntry(id)\n        .then((response) => {\n          console.log(id);\n          setPersons(persons.filter((x) => id !== x.id));\n        })\n        .catch((error)=>{\n          setErrorMessage(`Information of ${persons[persons.findIndex(x=>x.id===id)].name} has already been removed from the server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 3000)\n          console.log(`Information of ${persons[persons.findIndex(x=>x.id===id)].name} has already been removed from the server`)\n          personService.getAll().then((initialList) => {\n            setPersons(initialList);\n          });\n        })\n    } else {\n      console.log(`${id} not deleted per user confirmation.`);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter filter={filter} handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        addName={addName}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}