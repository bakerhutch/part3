{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addName","handleNameChange","handleNumberChange","newName","newNumber","onSubmit","type","value","onChange","required","pattern","DeleteButton","id","handleDelete","name","onClick","Persons","persons","filter","regexp","RegExp","newArr","x","test","map","number","Filter","handleFilter","baseUrl","axios","get","then","response","console","log","data","personObj","request","post","delete","newPerson","put","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","useEffect","personService","initialList","e","target","preventDefault","personsObj","every","concat","setTimeout","existPerson","window","confirm","findIndex","catch","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.a4e63855.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({addName,handleNameChange,handleNumberChange, newName, newNumber}) => {\r\n  \r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name:{\"\"}\r\n        <input\r\n          type=\"text\"\r\n          value={newName}\r\n          onChange={handleNameChange}\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        number:{\"\"}\r\n        <input\r\n          type=\"tel\"\r\n          value={newNumber}\r\n          onChange={handleNumberChange}\r\n          pattern=\"[0-9]{3}-[0-9]{3}-[0-9]{4}\"\r\n          required\r\n        />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst DeleteButton = ({id , handleDelete}) => {\r\n  return (\r\n    <button name={id} type='button' onClick={()=>handleDelete(id)}>\r\n      delete\r\n    </button>\r\n  )\r\n}\r\n\r\nconst Persons = ({ persons, filter, handleDelete }) => {\r\n  const regexp = new RegExp(filter, \"i\");\r\n  const newArr = persons.filter((x) => regexp.test(x.name));\r\n  if (filter) {\r\n    return (\r\n      <>\r\n        {newArr.map((x) => (\r\n          <div key={x.name}>\r\n            {x.name} {x.number} <DeleteButton id={x.id} />\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n  } else {\r\n    return (\r\n      <>\r\n        {persons.map((x) => (\r\n          <div key={x.name}>\r\n            {x.name} {x.number} <DeleteButton id={x.id} handleDelete={handleDelete}/>\r\n          </div>\r\n        ))}\r\n      </>\r\n    );\r\n}}\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({filter, handleFilter}) => {\r\n    return (\r\n        <p>\r\n            filter search with: <input type='text' value={filter} onChange={handleFilter} />\r\n        </p>\r\n    )\r\n}\r\n\r\nexport default Filter","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then((response) => {\r\n        console.log(response.data)\r\n        return response.data\r\n    })\r\n}\r\n\r\nconst addEntry = (personObj) => {\r\n    const request = axios.post(baseUrl, personObj)\r\n    console.log(`Added ${personObj.name} with id: '${personObj.id} to JSON server`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst delEntry = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    console.log('DelEntry')\r\n    return request.then(response=>response.data)\r\n}\r\n\r\nconst changeNumber = (personObj, newNumber) => {\r\n    const newPerson = {...personObj, number: newNumber}\r\n    console.log('changeNumber')\r\n    const request = axios.put(`${baseUrl}/${personObj.id}`, newPerson)\r\n    return request.then(response=>response.data)\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {getAll, addEntry, delEntry, changeNumber}","import React from \"react\";\r\n\r\nconst Notification = ({message}) => {\r\n    if (message===null) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className='error'>\r\n            {message}\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\nimport Notification from './components/Notification'\nimport './index.css'\n\n//<div>debug: {newName}</div> - temporarily added to rendered component to help debup passing state and other variables\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\"); //for controlling the form input method\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialList) => {\n      setPersons(initialList);\n    });\n  }, []);\n\n  //console.log(\"render\", persons.length, \"people\");\n\n  const addName = (e) => {\n    e.preventDefault();\n    const personsObj = {\n      name: newName,\n      number: newNumber,\n    };\n    //eslint-disable-next-line\n    if (persons.every((x) => x.name != personsObj.name)) {\n      //2.15 Adding number to db.json. Will use personService in next exercise\n      personService.addEntry(personsObj).then((response) => {\n        console.log(response);\n        setPersons(persons.concat(response));\n        setErrorMessage(`${response.name} has been added.`)\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n      });\n    } else {\n      const existPerson = persons.filter(x=>x.name===personsObj.name)\n      personService\n        .changeNumber(existPerson[0], newNumber)\n        .then(response=>{\n          setPersons(persons.map(x=>x.id===response.id ? response : x))\n          setErrorMessage(`${response.name}'s entry has been updated.`)\n          setTimeout(() => {\n          setErrorMessage(null)\n        }, 3000)\n        });\n    }\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const handleNameChange = (e) => {\n    //console.log(e.target.value)\n    setNewName(e.target.value);\n  };\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const handleFilter = (e) => {\n    setFilter(e.target.value);\n  };\n\n  const handleDelete = (id) => {\n    const result = window.confirm(`Delete ${persons[persons.findIndex(x=>x.id===id)].name}?`);\n    if (result) {\n      personService\n        .delEntry(id)\n        .then((response) => {\n          console.log(response);\n          setPersons(persons.filter((x) => id !== x.id));\n        })\n        .catch((error)=>{\n          setErrorMessage(`Information of ${persons[persons.findIndex(x=>x.id===id)].name} has already been removed from the server`)\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 3000)\n          console.log(`Information of ${persons[persons.findIndex(x=>x.id===id)].name} has already been removed from the server`)\n          personService.getAll().then((initialList) => {\n            setPersons(initialList);\n          });\n        })\n    } else {\n      console.log(`${id} not deleted per user confirmation.`);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter filter={filter} handleFilter={handleFilter} />\n      <h2>add a new</h2>\n      <PersonForm\n        addName={addName}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={persons} filter={filter} handleDelete={handleDelete} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}